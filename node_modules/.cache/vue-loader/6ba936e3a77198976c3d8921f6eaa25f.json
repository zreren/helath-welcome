{"remainingRequest":"/Users/lincheng/Documents/字节青训营项目数据可视化/wechart/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/lincheng/Documents/字节青训营项目数据可视化/wechart/src/components/Edit/DataEditALL/pieDataEdit.vue?vue&type=style&index=0&id=7641d5ed&scoped=true&lang=css","dependencies":[{"path":"/Users/lincheng/Documents/字节青训营项目数据可视化/wechart/src/components/Edit/DataEditALL/pieDataEdit.vue","mtime":1633361879773},{"path":"/Users/lincheng/Documents/字节青训营项目数据可视化/wechart/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lincheng/Documents/字节青训营项目数据可视化/wechart/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1628298225000},{"path":"/Users/lincheng/Documents/字节青训营项目数据可视化/wechart/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lincheng/Documents/字节青训营项目数据可视化/wechart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lincheng/Documents/字节青训营项目数据可视化/wechart/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci51cGxvYWQgewogIHotaW5kZXg6IDEwOwogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6IDgwcHg7CiAgdHJhbnNmb3JtOiBzY2FsZSgyKTsKICByaWdodDogMzBweDsKICBjb2xvcjogIzQwOWVmZjsKfQouZWRpdGFibGUtcm93LW9wZXJhdGlvbnMgYSB7CiAgbWFyZ2luLXJpZ2h0OiA4cHg7Cn0K"},{"version":3,"sources":["/Users/lincheng/Documents/字节青训营项目数据可视化/wechart/src/components/Edit/DataEditALL/pieDataEdit.vue"],"names":[],"mappings":";AAiKA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACnB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;EACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACnB","file":"/Users/lincheng/Documents/字节青训营项目数据可视化/wechart/src/components/Edit/DataEditALL/pieDataEdit.vue","sourceRoot":"","sourcesContent":["<template>\n  <a-table :pagination=\"false\" :columns=\"columns\" :data-source=\"dataSource\" bordered>\n    <template #customTite>\n          <div style=\"cursor:pointer\"  @click=\"changeTitle\">\n            {{chartTitle}}\n          </div>\n      </template>\n\n    <template v-for=\"col in ['name', 'value']\" #[col]=\"{ text, record }\" :key=\"col\">\n      <div>\n        <a-input\n          v-if=\"editableData[record.key]\"\n          v-model:value=\"editableData[record.key][col]\"\n          style=\"margin: -5px 0\"\n        />\n        <template v-else>\n          {{ text }}\n        </template>\n      </div>\n    </template>\n    <template #operation=\"{ record }\">\n      <div class=\"editable-row-operations\">\n        <span v-if=\"editableData[record.key]\">\n          <a @click=\"save(record.key)\">Save</a>\n          <a-popconfirm title=\"Sure to cancel?\" @confirm=\"cancel(record.key)\">\n            <a>Cancel</a>\n          </a-popconfirm>\n        </span>\n        <span v-else>\n          <a @click=\"edit(record.key)\">Edit</a>\n        </span>\n      </div>\n    </template>\n  </a-table>\n  <a-popconfirm  v-if=\"dataSource.length > 1\" title=\"确定删除最后一行吗\" @confirm=\"onDelete\">\n      <a-button   style=\"width:50%;\" ><i class=\"el-icon-minus\"></i></a-button>\n  </a-popconfirm>\n  <a-button v-else class=\"editable-add-btn\" @click=\"handleAdd\" style=\"width: 100%;\"><i class=\"el-icon-plus\" style=\"\"></i></a-button>\n  <a-button v-if=\"dataSource.length > 1\" class=\"editable-add-btn\" @click=\"handleAdd\" style=\"width: 50%; \"><i class=\"el-icon-plus\" style=\"\"></i></a-button>\n  <i @click=\"$router.push('/edit/upload')\" index=\"1\" class=\"el-icon-upload upload\"></i><!-- <upload/> -->\n</template>\n<script>\nimport { cloneDeep } from 'lodash-es';\nimport { defineComponent, reactive, ref } from 'vue';\nimport { useStore } from 'vuex'\nimport { ElMessageBox } from 'element-plus';\nimport { ElMessage } from 'element-plus';\nimport { cahrtTemplate } from '@/common/chart/chart'\n\nexport default defineComponent({\n  setup() {\n    const store = useStore()\n    const columns = [\n      {\n        dataIndex: 'name',\n        slots: {\n          title:'customTite',\n          customRender: 'name',\n        },\n      },\n      {\n        title: 'value',\n        width:'40%',\n        dataIndex: 'value',\n        slots: {\n          customRender: 'value',\n        },\n      },\n      {\n        title: 'operation',\n        dataIndex: 'operation',\n        width:'20%',\n        slots: {\n          customRender: 'operation',\n        },\n      },\n      ];\n    \n    const data = [\n      {key:'0', value: 1048, name: '搜索引擎'},\n      {key:'1', value: 735, name: '直接访问'},\n      {key:'2', value: 580, name: '邮件营销'},\n      {key:'3', value: 484, name: '联盟广告'},\n      {key:'4', value: 300, name: '视频广告'}];\n    \n    const chartTitle = ref('某站用户访问来源')\n\n    const dataSource = ref(data);\n\n    const editableData = reactive({});\n\n    const edit = key => {\n      editableData[key] = cloneDeep(dataSource.value.filter(item => key === item.key)[0]);\n    };\n\n    const save = key => {\n      console.log(key)\n      Object.assign(dataSource.value.filter(item => key === item.key)[0], editableData[key]);\n      Object.assign(cahrtTemplate[store.state.preChartType].series[0].data.filter(item => key === item.key)[0], editableData[key]);\n      store.state.act = Math.random()\n      delete editableData[key]\n    };\n\n    const cancel = key => {\n      delete editableData[key];\n    };\n\n    /**\n     * 增加减少行\n     */\n    const handleAdd = () => {\n      dataSource.value.push({key:`${dataSource.value.length}`, value: 0, name: '新数据集'});\n      cahrtTemplate[store.state.preChartType].series[0].data.push({key:`${dataSource.value.length - 1}`, value: 0, name: '新数据集'})\n    };\n    function onDelete() {\n      dataSource.value.pop();\n      cahrtTemplate[store.state.preChartType].series[0].data.pop()\n    }\n\n\n    /**\n     * 修改title\n     */\n    function changeTitle() {\n      ElMessageBox.prompt('改变图标Title', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n        })\n        .then(({ value }) => {\n            chartTitle.value = value\n            ElMessage({\n              type: 'success',\n              message: `已改变Title`,\n            });\n            cahrtTemplate[store.state.preChartType].title.text = value\n          })\n        .catch(() => {\n            ElMessage({\n              type: 'info',\n              message: '取消操作',\n            });\n          });\n    }\n\n    return {\n      dataSource,\n      columns,\n      editingKey: '',\n      editableData,\n      edit,\n      save,\n      cancel,\n      chartTitle,\n      handleAdd,\n      onDelete,\n      changeTitle\n    };\n  },\n});\n</script>\n<style scoped>\n.upload {\n  z-index: 10;\n  position: fixed;\n  top: 80px;\n  transform: scale(2);\n  right: 30px;\n  color: #409eff;\n}\n.editable-row-operations a {\n  margin-right: 8px;\n}\n</style>"]}]}